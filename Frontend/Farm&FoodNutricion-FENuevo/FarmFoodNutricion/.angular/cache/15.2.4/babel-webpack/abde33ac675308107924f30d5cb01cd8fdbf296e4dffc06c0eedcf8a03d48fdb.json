{"ast":null,"code":"import { HttpStatusCode } from '@angular/common/http';\nimport Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/Services/login.service\";\nimport * as i3 from \"@angular/forms\";\nexport class LoginComponent {\n  constructor(router, loginServ) {\n    this.router = router;\n    this.loginServ = loginServ;\n    this.user = {};\n  }\n  ngOnInit() {}\n  login() {\n    if (this.validateParams()) {\n      this.loginServ.postLogin(this.user.usuario, this.user.password).subscribe({\n        next: response => {\n          this.user = response;\n          this.loginServ.setToken(this.user.id_usuario.toString(), this.user.usuario, this.user.nombre_rol);\n          Swal.fire({\n            title: 'Bienvenido',\n            icon: 'warning',\n            confirmButtonText: \"Ok\"\n          });\n          //      this.router.navigate(['/']);\n        },\n\n        error: err => {\n          if (err.status == 404 /* HttpStatusCode.NotFound */) {\n            Swal.fire({\n              title: 'Usuario y/o contraseña incorrecta',\n              icon: 'warning',\n              confirmButtonText: \"Ok\"\n            });\n          }\n          if (err.status == 500 /* HttpStatusCode.InternalServerError */) {\n            Swal.fire({\n              title: 'Error en el Servicio',\n              icon: 'error',\n              confirmButtonText: \"Ok\"\n            });\n          }\n        }\n      });\n    } else {\n      Swal.fire({\n        title: 'Ingrese nombre de usuario y contraseña',\n        icon: 'warning',\n        confirmButtonText: \"Ok\"\n      });\n    }\n  }\n  validateParams() {\n    if (this.user.usuario != null && this.user.usuario != \"\" && this.user.password != null && this.user.password != \"\") {\n      return true;\n    }\n    return false;\n  }\n}\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.LoginService));\n};\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 15,\n  vars: 2,\n  consts: [[1, \"wrapper\"], [1, \"text-center\", \"mt-4\", \"name\"], [1, \"p-3\", \"mt-3\"], [1, \"form-field\", \"d-flex\", \"align-items-center\"], [1, \"far\", \"fa-user\"], [\"type\", \"text\", \"name\", \"usuario\", \"id\", \"userName\", \"placeholder\", \"Usuario\", 3, \"ngModel\", \"ngModelChange\"], [1, \"fas\", \"fa-key\"], [\"type\", \"password\", \"name\", \"password\", \"id\", \"password\", \"placeholder\", \"Contrase\\u00F1a\", 3, \"ngModel\", \"ngModelChange\"], [1, \"btn\", \"mt-3\", 3, \"click\"], [1, \"text-center\", \"fs-6\"], [\"href\", \"/register\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n      i0.ɵɵtext(2, \" FarmFoodNutricion \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"form\", 2)(4, \"div\", 3);\n      i0.ɵɵelement(5, \"span\", 4);\n      i0.ɵɵelementStart(6, \"input\", 5);\n      i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_6_listener($event) {\n        return ctx.user.usuario = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(7, \"div\", 3);\n      i0.ɵɵelement(8, \"span\", 6);\n      i0.ɵɵelementStart(9, \"input\", 7);\n      i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_9_listener($event) {\n        return ctx.user.password = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(10, \"button\", 8);\n      i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_10_listener() {\n        return ctx.login();\n      });\n      i0.ɵɵtext(11, \"Acceder\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(12, \"div\", 9)(13, \"a\", 10);\n      i0.ɵɵtext(14, \"Registrarse\");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngModel\", ctx.user.usuario);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.user.password);\n    }\n  },\n  dependencies: [i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.NgModel, i3.NgForm],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"AAAA,SAA4BA,cAAc,QAAQ,sBAAsB;AAKxE,OAAOC,IAAI,MAAM,aAAa;;;;;AAQ9B,OAAM,MAAOC,cAAc;EAKzBC,YAAoBC,MAAa,EAAUC,SAAuB;IAA9C,WAAM,GAAND,MAAM;IAAiB,cAAS,GAATC,SAAS;IAFpD,SAAI,GAAG,EAAa;EAEkD;EAEtEC,QAAQ,IACR;EAEAC,KAAK;IACH,IAAG,IAAI,CAACC,cAAc,EAAE,EAAE;MAC3B,IAAI,CAACH,SAAS,CAACI,SAAS,CAAC,IAAI,CAACC,IAAI,CAACC,OAAO,EAAE,IAAI,CAACD,IAAI,CAACE,QAAQ,CAAC,CAACC,SAAS,CAAC;QACxEC,IAAI,EAAGC,QAAkB,IAAI;UACxB,IAAI,CAACL,IAAI,GAAGK,QAAQ;UACpB,IAAI,CAACV,SAAS,CAACW,QAAQ,CAAC,IAAI,CAACN,IAAI,CAACO,UAAU,CAACC,QAAQ,EAAE,EAAE,IAAI,CAACR,IAAI,CAACC,OAAO,EACpE,IAAI,CAACD,IAAI,CAACS,UAAU,CAAC;UAErBlB,IAAI,CAACmB,IAAI,CAAC;YACRC,KAAK,EAAE,YAAY;YACnBC,IAAI,EAAE,SAAS;YACfC,iBAAiB,EAAE;WACpB,CAAC;UACR;QACN,CAAC;;QACAC,KAAK,EAAGC,GAAsB,IAAI;UAC7B,IAAGA,GAAG,CAACC,MAAM,uCAA6B;YACxCzB,IAAI,CAACmB,IAAI,CAAC;cACRC,KAAK,EAAE,mCAAmC;cAC1CC,IAAI,EAAE,SAAS;cACfC,iBAAiB,EAAE;aACpB,CAAC;;UAEJ,IAAGE,GAAG,CAACC,MAAM,kDAAwC;YACnDzB,IAAI,CAACmB,IAAI,CAAC;cACRC,KAAK,EAAE,sBAAsB;cAC7BC,IAAI,EAAE,OAAO;cACbC,iBAAiB,EAAE;aACtB,CAAC;;QAEP;OACD,CAAC;KACA,MAAM;MACLtB,IAAI,CAACmB,IAAI,CAAC;QACRC,KAAK,EAAE,wCAAwC;QAC/CC,IAAI,EAAE,SAAS;QACfC,iBAAiB,EAAE;OACpB,CAAC;;EAEN;EAEAf,cAAc;IACZ,IAAG,IAAI,CAACE,IAAI,CAACC,OAAO,IAAI,IAAI,IAAI,IAAI,CAACD,IAAI,CAACC,OAAO,IAAI,EAAE,IACnD,IAAI,CAACD,IAAI,CAACE,QAAQ,IAAI,IAAI,IAAI,IAAI,CAACF,IAAI,CAACE,QAAQ,IAAI,EAAE,EAAE;MACtD,OAAO,IAAI;;IAEjB,OAAO,KAAK;EACd;;AAzDWV,cAAc;mBAAdA,cAAc;AAAA;AAAdA,cAAc;QAAdA,cAAc;EAAAyB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCb3BC,8BAAqB;MAGbA,mCACJ;MAAAA,iBAAM;MACNA,+BAAuB;MAEfA,0BAAiC;MACjCA,gCAAiG;MAA/DA;QAAA;MAAA,EAA0B;MAA5DA,iBAAiG;MAErGA,8BAAkD;MAC9CA,0BAAgC;MAChCA,gCAA0G;MAAnEA;QAAA;MAAA,EAA2B;MAAlEA,iBAA0G;MAE9GA,kCAA2C;MAAlBA;QAAA,OAASC,WAAO;MAAA,EAAC;MAACD,wBAAO;MAAAA,iBAAS;MAE/DA,+BAA8B;MACNA,4BAAW;MAAAA,iBAAI;;;MATGA,eAA0B;MAA1BA,0CAA0B;MAIrBA,eAA2B;MAA3BA,2CAA2B","names":["HttpStatusCode","Swal","LoginComponent","constructor","router","loginServ","ngOnInit","login","validateParams","postLogin","user","usuario","password","subscribe","next","response","setToken","id_usuario","toString","nombre_rol","fire","title","icon","confirmButtonText","error","err","status","selectors","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["C:\\Users\\magal\\OneDrive\\Documents\\GitHub\\Farm-FoodNutricion\\Frontend\\Farm&FoodNutricion-FENuevo\\FarmFoodNutricion\\src\\app\\Componentes\\login\\login.component.ts","C:\\Users\\magal\\OneDrive\\Documents\\GitHub\\Farm-FoodNutricion\\Frontend\\Farm&FoodNutricion-FENuevo\\FarmFoodNutricion\\src\\app\\Componentes\\login\\login.component.html"],"sourcesContent":["import { HttpErrorResponse, HttpStatusCode } from '@angular/common/http';\nimport { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Usuario } from 'src/app/Interfaces/usuario';\nimport { LoginService } from 'src/app/Services/login.service';\nimport Swal from 'sweetalert2';\n\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})\nexport class LoginComponent {\n\n\n  user = {} as Usuario;\n\n  constructor(private router:Router, private loginServ: LoginService) { }\n\n  ngOnInit(): void {\n  }\n\n  login() {\n    if(this.validateParams()) {\n\t\t\tthis.loginServ.postLogin(this.user.usuario, this.user.password).subscribe({\n\t\t\t  next: (response : Usuario) => {\n          this.user = response;\n          this.loginServ.setToken(this.user.id_usuario.toString(), this.user.usuario, \n                this.user.nombre_rol);\n\n                Swal.fire({\n                  title: 'Bienvenido',\n                  icon: 'warning',\n                  confirmButtonText: \"Ok\",\n                });\n          //      this.router.navigate(['/']);\n\t\t\t\t},\n\t\t\t  error: (err: HttpErrorResponse) => {\n          if(err.status == HttpStatusCode.NotFound) {\n            Swal.fire({\n              title: 'Usuario y/o contraseña incorrecta',\n              icon: 'warning',\n              confirmButtonText: \"Ok\",\n            });\n          }\n          if(err.status == HttpStatusCode.InternalServerError) {\n            Swal.fire({\n              title: 'Error en el Servicio',\n              icon: 'error',\n              confirmButtonText: \"Ok\",\n          });\n          }\n\t\t\t  },\n\t\t\t})\n    } else {\n      Swal.fire({\n        title: 'Ingrese nombre de usuario y contraseña',\n        icon: 'warning',\n        confirmButtonText: \"Ok\",\n      });\n    }\n  }\n\n  validateParams() : boolean {\n    if(this.user.usuario != null && this.user.usuario != \"\" &&\n        this.user.password != null && this.user.password != \"\") {\n          return true;\n    }\n    return false;\n  }\n\n  \n}\n","<div class=\"wrapper\">\n    \n    <div class=\"text-center mt-4 name\">\n        FarmFoodNutricion\n    </div>\n    <form class=\"p-3 mt-3\">\n        <div class=\"form-field d-flex align-items-center\">\n            <span class=\"far fa-user\"></span>\n            <input type=\"text\" name=\"usuario\" [(ngModel)]=\"user.usuario\" id=\"userName\" placeholder=\"Usuario\">\n        </div>\n        <div class=\"form-field d-flex align-items-center\">\n            <span class=\"fas fa-key\"></span>\n            <input type=\"password\" name=\"password\" [(ngModel)]=\"user.password\" id=\"password\" placeholder=\"Contraseña\">\n        </div>\n        <button class=\"btn mt-3\" (click)=\"login()\">Acceder</button>\n    </form>\n    <div class=\"text-center fs-6\">\n        <a href=\"/register\">Registrarse</a>\n    </div>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}